# 什么是Git Workflow

Git 作为一个源码管理系统，不可避免涉及到多人协作，协作必须有一个规范的工作流程，让大家有效地合作，
使得项目井井有条地发展下去。"工作流程"在英语里叫做"workflow"或者"flow"，原意是水流，比喻项目像水流那样，顺畅、自然地向前流动，
不会发生冲击、对撞、甚至漩涡

# 为什么需要工作流

从现实的意义上来看，当一个项目变大的时候，意味着
- 同时会有多个功能在开发
- 同时会有多个Bug在修复
- 甚至于你同时在修复很多线上问题
- 有可能，你会回退版本（当然我们希望这种事从来都不会发生）

而这上面所说的问题，在一个`master`开发开支走天下的情况下，很难保证不会有冲突。事实上，大部分人会给自己创建
一个属于自己的分支（比如用户A给自己创建一个a分支），然后所有的开发代码都在这个分支上，这会导致下面的问题
- 提交的代码过多，完成无法完成`Code Review`
- 有可能在做这个开发任务的时候，还没有做完就会马上开始做另外的开发任务，两者代码融合在一起，导致代码冲突
- 代码无法跟踪，举个例子：一年前在`a`分支上提交了一份代码，半年前删除了这个代码，而删除的这份代码在现在产生了Bug，如果没有一个分支来跟踪此
代码，那么此问题将很难被发现且被修复

在一个成熟的代码管理系统中，是应该杜绝此类问题的。所以，一个成熟的`Git Workflow`显得尤为重要

# 分支模型

`Git Workflow`有以下几种分支
- master
- develop
- feature/xxx
- bugfix/xxx
- hotfix/xxx
- release/xxx

## master

`master`分支的作用在于存放一个最近最新的版本，本身该分支并不做任何修改。`master`分支会定期从`release`分支同步最新的
代码（通过`Pull Request`）进行代码合并。`master`分支

## develop

`develop`分支存放的是最新的开发代码，所有开发分支应该从`develop`分支创建新的开发分支（可以是`feature`、`bugfix`、`hotfix`）用于
开发最新的功能，开发完成并测试后，将代码合并到`develop`分支

## feature

`feature`分支主要是存放开发新功能时的分支，每一个功能对应一个分支，且开发完成并合并代码后不能删除原来的分支bugfix`并不是
对应一个具体分支，而是一个任务一个分支
> 严禁多个功能对应一个分支

## bugfix

`bugfix`分支对应`Bug`修改的代码，每一个`Bug`对应一个分支。`bugfix`并不是对应一个具体分支，而是一个任务一个分支
> 严禁多个`Bug`对应一个分支


## hotfix

`hotfix`分支对应线上问题`紧急修复`的代码，每一个`紧急修复`对应一个分支。`hotfix`并不是对应一个具体分支，而是一个任务一个分支。`hotfix`分支
只能从`release`分支拉出来，且需要合并到如下分支（假如现在有如下版本：v0.0.1、v0.0.2、v0.0.3，其中线上的版本是v0.0.2，`紧急修复`是v0.0.1）
- 对应的`release`分支
- `develop`分支
- `release/v0.0.3`分支

> 严禁多个`Bug`对应一个分支

## release

`release`分支主要用来存放版本发布的代码，假如要发布v0.0.1版本，刚从`develop`创建`release/v0.0.1`分支；`release`分支需要
定期向`master`分支合并代码（可以是这次发布合并上一个版本的代码到`master`分支）

## 分支命名规则

分支命名规则只对如下分支起作用
- feature
- bugfix
- hotfix
- release

其中，`feature`、`bugfix`以及`hotfix`的命名规范是一样的，而`release`分支的规范不同

### feature

下面以`feature`分支命名来解释分支命名规范，假设有如下任务`ITCOURSEE-24 后台打包成Docker镜像`，其中
- ITCOURSEE表示一个项目的键
- 24表示任务的编号
- 后面的是任务的简单名称

那么，分支的命名为：feature/ITCOURSEE-24-`后台打包成Docker镜像`的英文翻译

### release

`release`分支以版本发布为准，建议的版本规范为：`major`.`minor`.`patch-build`，其中
- `major`表示主版本号
- `minor`表示次版本号
- `patch`表示对`minor`版本的修订次数
- `build`为编译次数

那么版本号将为`0.0.1`、`0.0.2`，以此类推，以发布`0.0.1`版本为例，将从`develop`分支签出分支`release/v0.0.1`，至于要不要在前面加上`v`，
都可以，可以视团队内部而定

# 分支保护

以下分支在任何情况下都会被保护起来
- `master`
- `develop`
- `release`

保护分支的意义在于，`master`分支和`develop`以及`release`分支的代码很重要，不能被随意更改，只能被有权限的人提交代码或者创建`Pull Request`来
合并代码
